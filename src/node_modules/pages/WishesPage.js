import React from 'react'
import { useLocation, useParams } from 'react-router'
import { useSelector } from 'react-redux'

import { MultiColumnLayout } from 'containers/MultiColumnLayout'
import { WishCard } from 'containers/WishCard'

export const WishesPage = () => {
    const section = useLocation().pathname.split('/').at(1);
    let { tabName } = useParams();

    const allWishes = (section === 'my-wishes')
                    ? useSelector(state => state.wishes.ofCurrentUser)
                    : useSelector(state => state.wishes.ofOtherUsers);

    const wishes = (tabName === 'all')
                 ? allWishes
                 : (tabName === 'actual' || tabName === 'reserved')
                 ? allWishes.filter(wish => wish.state === 'actual' || wish.state === 'reserved')
                 : (tabName === 'completed')
                 ? allWishes.filter(wish => wish.state === 'completed')
                 : null

    return (
        <MultiColumnLayout
            Card={WishCard}
            data={wishes}
        />
    );
}