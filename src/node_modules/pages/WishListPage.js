import { React } from 'react'
import { useLocation } from 'react-router-dom'
import { useSelector } from 'react-redux'

import { WishlistLine } from 'containers/WishlistLine'
import { MultiColumnLayout } from 'containers/MultiColumnLayout'
import { getWishlistById } from 'getters'
import { WishCard } from 'containers/WishCard'

export const WishlistPage = () => {
    const location = useLocation().pathname
    const wishlistId = location.split('/').at(-1)
                     ? location.split('/').at(-1)
                     : location.split('/').at(-2);
    const wl = getWishlistById(wishlistId);

    const wishes = useSelector(state => state.wishes.all)
                  .filter(wish => wish.wishlistIds.includes(wl.id));

    return (
        <div>
            <WishlistLine
                wishlist={ wl }
                onWishlistPage={ true }
            />
            <MultiColumnLayout
                Card={WishCard}
                data={wishes}
            />
        </div>
    );
}