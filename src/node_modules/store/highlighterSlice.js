import { createSlice } from '@reduxjs/toolkit'

const highlighterSlice = createSlice({
    name: 'highLighter',
    initialState: {
        inAppHeaderCoords: {
            x: 0,
            y: 0,
            width: 0,
            height: 11
        },
        inSideBarCoords: {
            x: 13,
            y: 0,
            width: 33,
            height: 33
        }
    },
    reducers: {
        setHighlighterCoordsInAppHeader(state) {
            const activeTab = document.querySelector('.header-nav.active');
            if(!activeTab) return state;

            const activeTabCoords = activeTab.getBoundingClientRect();

            state.inAppHeaderCoords.x = Math.floor(activeTabCoords.x);
            state.inAppHeaderCoords.y = Math.floor(activeTabCoords.y) + 36;
            state.inAppHeaderCoords.width = Math.ceil(activeTabCoords.width);
        },
        setHighlighterCoordsInSideBar(state) {
            const activeOption = document.querySelector('.side-nav.active');
            if (!activeOption) return state;
            
            const activeOptionCoords = activeOption.getBoundingClientRect();

            state.inSideBarCoords.y = activeOptionCoords.y + 11;
        },
    },
});

export const {
    setHighlighterCoordsInAppHeader,
    setHighlighterCoordsInSideBar
} = highlighterSlice.actions;

export default highlighterSlice.reducer;