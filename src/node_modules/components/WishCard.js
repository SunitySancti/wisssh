import React from 'react'
import { useNavigate, useLocation } from 'react-router-dom'

import { Button } from 'components/Button'
import { generateId } from 'getters/idGen'

export const WishCard = ({ wish, className }) => {
    const w = wish;
    const currency = w.currency==='rouble' ? ' ₽'
                   : w.currency==='yuan'   ? ' Ұ'
                   : w.currency==='usd'    ? ' $'
                   : w.currency==='euro'   ? ' €'
                   : '';

    const priceBlock = w.price ? (
        <span className='price'>
            {w.price + currency}
        </span>
    ) : null

    let navigate = useNavigate();
    const loca = useLocation().pathname
    const slashCorrection = loca.at(-1) === '/'
        ? '' : '/'
    const path = loca + slashCorrection + w.id;
    // const onClick = () => { navigate(path) }
    const onClick = () => { navigate(path) }

    return (
        <div
            className={className + ' wishcard'}
            key={ w.id }
            onClick={ onClick }
        >
            <img src={ w.image }></img>
            <div className='wishcard-content'>
                <span className='title'>{ w.title }</span>
                { priceBlock }
            </div>
            <Button
                leftIcon="present"
                text="Исполнить желание"
                type="secondary"
                state={ w.state }
            />
            <div className='stars'></div>
        </div>
    )
}