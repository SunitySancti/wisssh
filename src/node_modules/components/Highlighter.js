import React, {useLayoutEffect} from 'react'
import { useDispatch, useSelector } from 'react-redux'

import { setHighlighterCoordsInAppHeader } from 'store/highlighterSlice'

export const Highlighter = ({ location }) => {
    const appHeaderCoords = useSelector(state => state.highlighters.inAppHeaderCoords);
    const sideBarCoords = useSelector(state => state.highlighters.inSideBarCoords);
    const defaultCoords = {x:0, y:0, width:0, height:0};
    const coords = (location==='app-header')
                 ? appHeaderCoords
                 : (location==='sidebar')
                 ? sideBarCoords
                 : defaultCoords;

    const dispatch = useDispatch();
    const updateCoords = () => dispatch(setHighlighterCoordsInAppHeader());

    useLayoutEffect(() => {
        console.log('Highlighter coords are: ', coords);
        window.addEventListener('resize', updateCoords);
        return () => { window.removeEventListener('resize', updateCoords) }
    }, [])

    return (
        <div
            className='highlighter'
            style={{
                left: coords.x,
                top: coords.y,
                width: coords.width,
                height: coords.height
            }}
        ></div>
    );
}