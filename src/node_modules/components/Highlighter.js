import React, {useEffect} from 'react'
import { useDispatch, useSelector } from 'react-redux'

import {
    setHighlighterCoordsInAppHeader,
    setHighlighterCoordsInModeToggle,
    setHighlighterCoordsInNavBar,
 } from 'store/highlighterSlice'

export const Highlighter = ({ location }) => {
    const appHeaderCoords = useSelector(state => state.highlighters.inAppHeaderCoords);
    const modeToggleCoords = useSelector(state => state.highlighters.inModeToggleCoords);
    const navBarCoords = useSelector(state => state.highlighters.inNavBarCoords);
    const defaultCoords = {x:0, y:0, width:0, height:0};
    const coords = (location==='app-header')
                 ? appHeaderCoords
                 : (location==='mode-toggle')
                 ? modeToggleCoords
                 : (location==='navbar')
                 ? navBarCoords
                 : defaultCoords;

    const dispatch = useDispatch();
    const updateCoords = () => {
        dispatch(setHighlighterCoordsInAppHeader());
        dispatch(setHighlighterCoordsInModeToggle());
        dispatch(setHighlighterCoordsInNavBar());
    };

    useEffect(() => {
        window.addEventListener('resize', updateCoords);
        return () => { window.removeEventListener('resize', updateCoords) }
    }, [])

    return (
        <div
            className='highlighter'
            style={{
                left: coords.x,
                top: coords.y,
                width: coords.width,
                height: coords.height
            }}
        ></div>
    );
}