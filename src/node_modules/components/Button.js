import React from 'react'
import { useLocation } from 'react-router'

import { Icon } from 'components/Icon'

export const Button = ({
    type,
    text,
    leftIcon,
    rightIcon,
    handleClick,
    isDisabled
}) => {
    const renderLeftIcon = leftIcon ? (
        <Icon
            name={ leftIcon }
            size='30'
        ></Icon>
    ) : null
    const renderRightIcon = rightIcon ? (
        <Icon
            name={ rightIcon }
            size='30'
        ></Icon>
    ) : null

    return (
        <button
            className={type + ' button'}
            onClick={handleClick}
            disabled={isDisabled}
        >
            { renderLeftIcon }
            <span>{text}</span>
            { renderRightIcon }
        </button>
    );
}

export const WishButton = ({ wish, type }) => {
    const loca = useLocation().pathname;
    const isMyWish = loca.split('/').at(1) === 'my-wishes';

    const content = (wish.state === 'actual' && isMyWish)
        ? {
            icon: 'ok',
            text: 'Отметить исполненным',
            handleClick() {console.log('жмяк')},
        }
        : (wish.state === 'actual' && !isMyWish)
        ? {
            icon: 'present',
            text: 'Исполнить желание',
            handleClick() {console.log('жмяк')},
        }
        : (wish.state === 'reserved')
        ? {
            icon: 'lock',
            text: 'Зарезервировано',                
            isDisabled: true,
        }
        : (wish.state === 'completed')
        ? {
            icon: 'ok',
            text: 'Желание исполнено',
            isDisabled: true,
        }
        : undefined

    if(!content) return null;

    return (
        <Button
            type={ type || 'secondary' }
            leftIcon={ content.icon }
            text={ content.text }
            isDisabled={ !!content.isDisabled }
            handleClick={ content.handleClick }
        />
    );
}