import React from 'react'
import { NavLink, useMatch } from 'react-router-dom'
import { Outlet } from 'react-router'
import { useSelector } from 'react-redux'

import { IconButton } from 'components/IconButton'



export const SideBar = () => {
    const wishLists = useSelector(state => state.wishLists.all)
    const Header = ({ children, plusFunc }) => {
        return (
            <div className='side-header'>
                <span>{children}</span>
                <IconButton icon='plus' func={plusFunc} size='55'/>
            </div>
        )
    }

    const Option = ({ children, to }) => {
        return (
            <NavLink to={ to } className={({isActive}) => isActive ? 'side-nav active' : 'side-nav'}>
                { children }
            </NavLink>
        )
    }

    const Divider = () => ( <div className='divider'></div> )

    return (
        <div className='app-body'>
            <div className='sidebar'>
                <Header>Желания</Header>
                <Option to='/my-wishes/actual'>Актуальные</Option>
                <Option to='/my-wishes/done'>Исполненные</Option>
                <Option to='/my-wishes/all'>Все</Option>
                <Divider/>
                <Header>Списки</Header>
                { Object.values(wishLists).map( wishList => 
                    <Option to={'/wishlists/my/' + wishList.id}>{wishList.title}</Option>
                )}
            </div>
            <div className='work-space'>
                <Outlet/>
            </div>
        </div>
    );
}